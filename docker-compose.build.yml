# For local development â€” builds from source instead of pulling pre-built image
services:
  cortex:
    build: .
    ports:
      - "21100:21100"
    volumes:
      - cortex-data:/app/cortex
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - CORTEX_PORT=21100
      - CORTEX_HOST=0.0.0.0
      - CORTEX_DB_PATH=cortex/brain.db
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - CORTEX_AUTH_TOKEN=${CORTEX_AUTH_TOKEN:-}
      - LOG_LEVEL=info
      - TZ=Asia/Tokyo
    restart: unless-stopped

volumes:
  cortex-data:
